## GitHub Actions lÃ  gÃ¬ vÃ  vÃ¬ sao Ä‘Ã¡ng dÃ¹ng

### Concept â€” Khi workflow khÃ´ng cÃ²n lÃ  lÃ½ thuyáº¿t

Tháº­t ra, tÃ´i khÃ´ng chÃº Ã½ nhiá»u Ä‘áº¿n GitHub Actions khi nÃ³ má»›i ra. 
LÃºc Ä‘Ã³ nhÃ³m tÃ´i váº«n dÃ¹ng Jenkins, tá»± quáº£n lÃ½ runner trÃªn EC2, 
má»—i láº§n build há»ng lÃ  pháº£i ssh vÃ o mÃ¡y, xoÃ¡ cache, rá»“i restart service báº±ng tay. 
Má»™t ngÃ y, vÃ¬ cáº§n pipeline táº¡m cho repo nhá», tÃ´i báº­t Actions trong GitHub thá»­. 
KhÃ´ng ká»³ vá»ng gÃ¬ nhiá»u â€” chá»‰ Ä‘á»‹nh â€œcháº¡y vÃ i test cho vuiâ€. NhÆ°ng workflow YAML Ä‘áº§u 
tiÃªn cháº¡y mÆ°á»£t má»™t cÃ¡ch Ä‘Ã¡ng ngáº¡c nhiÃªn.

Äiá»u lÃ m tÃ´i chÃº Ã½ khÃ´ng pháº£i vÃ¬ nÃ³ â€œdá»… dÃ¹ngâ€, mÃ  vÃ¬ nÃ³ **gáº¯n liá»n vá»›i repository**. 
Má»i thá»© tá»« event (push, pull_request) cho Ä‘áº¿n secrets, permissions Ä‘á»u náº±m trong GitHub, 
khÃ´ng cáº§n káº¿t ná»‘i thÃªm há»‡ thá»‘ng khÃ¡c. Há»‡ thá»‘ng nÃ y váº­n hÃ nh theo mÃ´ hÃ¬nh 
**event-driven**: cÃ³ má»™t sá»± kiá»‡n xáº£y ra â†’ workflow Ä‘Æ°á»£c kÃ­ch hoáº¡t â†’ runner táº£i code vá», 
thá»±c thi cÃ¡c bÆ°á»›c (steps), rá»“i Ä‘áº©y log trá»Ÿ láº¡i GitHub. Nghe Ä‘Æ¡n giáº£n, nhÆ°ng chÃ­nh 
cÃ¡i â€œnativeâ€ Ä‘Ã³ khiáº¿n nÃ³ khÃ¡c háº³n nhá»¯ng ná»n CI/CD khÃ¡c.

Náº¿u báº¡n tá»«ng pháº£i cáº¥u hÃ¬nh webhooks Ä‘á»ƒ Jenkins biáº¿t khi nÃ o repo Ä‘á»•i, báº¡n sáº½ hiá»ƒu 
giÃ¡ trá»‹ cá»§a chuyá»‡n nÃ y. KhÃ´ng cÃ²n webhook lá»‡ch payload, khÃ´ng cáº§n token thá»§ cÃ´ng. 
GitHub Actions chá»‰ cáº§n báº¡n commit file YAML vÃ o `.github/workflows/`, má»i thá»© tá»± diá»…n ra.

Vá» báº£n cháº¥t, nÃ³ lÃ  má»™t **workflow orchestrator** bÃªn trong GitHub Platform. Má»—i job 
Ä‘Æ°á»£c gá»­i Ä‘áº¿n má»™t **runner** â€” cÃ³ thá»ƒ lÃ  hosted (Ubuntu, Windows, macOS cá»§a GitHub) 
hoáº·c self-hosted (báº¡n tá»± cÃ i). Runner giá»‘ng nhÆ° má»™t container ephemeral: sau má»—i job, 
mÃ´i trÆ°á»ng bá»‹ xoÃ¡ sáº¡ch Ä‘á»ƒ trÃ¡nh rÃ² rá»‰ state. Khi báº¡n nhÃ¬n tháº¥y log â€œJob succeededâ€, 
tháº­t ra Ä‘áº±ng sau Ä‘Ã³ lÃ  cáº£ 
chuá»—i orchestration: queue â†’ runner provision â†’ execution â†’ upload artifact.

Äiá»ƒm yáº¿u duy nháº¥t thá»i Ä‘Ã³ lÃ  nÃ³ chÆ°a cÃ³ reusable workflow vÃ  caching hiá»‡u quáº£. 
NhÆ°ng vá»›i dá»± Ã¡n nhá», sá»± tiá»‡n lá»£i tháº¯ng tuyá»‡t Ä‘á»‘i. Trong cÃ¹ng má»™t chiá»u tá»‘i, 
tÃ´i Ä‘Ã£ gá»¡ toÃ n bá»™ Jenkinsfile cÅ©, thay báº±ng má»™t YAML 20 dÃ²ng. VÃ  Ä‘iá»u buá»“n cÆ°á»i 
lÃ  build cháº¡y nhanh hÆ¡n, Ä‘Æ¡n giáº£n vÃ¬ khÃ´ng cÃ²n pháº£i chá» node agent tá»± khá»Ÿi Ä‘á»™ng.

### Build â€” Viá»‡c Ä‘áº§u tiÃªn tÃ´i lÃ m vá»›i GitHub Actions

TÃ´i báº¯t Ä‘áº§u báº±ng workflow nhá» nháº¥t cÃ³ thá»ƒ.

```yaml
name: Hello Actions
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Run greeting
        run: echo "Hello from GitHub Actions ğŸ‘‹"
```

TÃ´i commit file nÃ y vÃ o nhÃ¡nh `main`. Ngay láº­p tá»©c, tab **Actions** xuáº¥t hiá»‡n 
vá»›i dÃ²ng â€œHello Actions â€“ build runningâ€. ChÆ°a Ä‘áº§y má»™t phÃºt sau, log hiá»‡n ra: 
hai bÆ°á»›c, cáº£ hai Ä‘á»u xanh. TÃ´i báº¥m vÃ o tá»«ng step, xem runner log: cÃ³ pháº§n 
download repo, thiáº¿t láº­p GITHUB_WORKSPACE, rá»“i thá»±c thi lá»‡nh bash. 
Má»i thá»© minh báº¡ch, gá»n gÃ ng.

TÃ´i Ä‘á»•i `on: push` thÃ nh `on: pull_request`, táº¡o má»™t PR giáº£. Workflow cháº¡y láº¡i, 
láº§n nÃ y log ghi rÃµ *event: pull_request*. Cáº£m giÃ¡c Ä‘Ã³ â€” nhÃ¬n pipeline tá»± cháº¡y khi 
cÃ³ PR má»›i â€” chÃ­nh lÃ  â€œclick momentâ€. KhÃ´ng cáº§n thÃªm server, khÃ´ng cáº§n token, khÃ´ng 
cáº§n Jenkinsfile náº·ng ná».

Khi báº¡n hiá»ƒu mÃ´ hÃ¬nh **event â†’ workflow â†’ job â†’ steps**, má»i thá»© báº¯t Ä‘áº§u sÃ¡ng rÃµ. 
Má»™t event chá»‰ lÃ  JSON payload tá»« GitHub, chá»©a thÃ´ng tin vá» repo, user, commit, 
branch. Workflow nháº­n payload Ä‘Ã³, chá»n cÃ¡c job phÃ¹ há»£p Ä‘á»ƒ cháº¡y. Má»—i job lÃ  má»™t 
mÃ´i trÆ°á»ng Ä‘á»™c láº­p, thá»±c thi tuáº§n tá»± cÃ¡c steps (run command hoáº·c gá»i action). 
Actions báº£n thÃ¢n chá»‰ lÃ  module tÃ¡i sá»­ dá»¥ng, cÃ³ thá»ƒ viáº¿t báº±ng JavaScript hoáº·c Docker.

TÃ´i thá»­ thÃªm job thá»© hai Ä‘á»ƒ kiá»ƒm chá»©ng cÆ¡ cháº¿ song song:

```yaml
  test:
    runs-on: ubuntu-latest
    steps:
      - run: echo "Running tests..."
```

Hai job cháº¡y cÃ¹ng lÃºc. Tá»•ng thá»i gian thá»±c giáº£m gáº§n ná»­a. KhÃ´ng cáº§n thÃªm cáº¥u hÃ¬nh gÃ¬ 
â€” vÃ¬ GitHub lo pháº§n queue vÃ  runner pool cho báº¡n.

Äiá»u Ä‘Ã¡ng giÃ¡ lÃ  log hiá»ƒn thá»‹ theo thá»i gian thá»±c. TÃ´i cÃ³ thá»ƒ xem tá»«ng step, 
dá»«ng á»Ÿ step tháº¥t báº¡i, táº£i artifact log. Nhá»¯ng thá»© vá»‘n pháº£i cÃ i plugin trong 
Jenkins giá» lÃ  máº·c Ä‘á»‹nh.

VÃ i tuáº§n sau, chÃºng tÃ´i quyáº¿t Ä‘á»‹nh dÃ¹ng GitHub Actions cho dá»± Ã¡n tháº­t. LÃºc Ä‘Ã³ 
repo cÃ³ hÆ¡n 15 package Node.js, build matrix gáº§n 40 biáº¿n thá»ƒ. 
Jenkins má»—i láº§n cháº¡y pháº£i máº¥t 25â€“30 phÃºt, vÃ  caching thÆ°á»ng bá»‹ 
lá»—i vÃ¬ node_modules khÃ´ng Ä‘á»“ng bá»™ giá»¯a cÃ¡c agent. TÃ´i thá»­ port sang Actions Ä‘á»ƒ xem sao.

Äáº§u tiÃªn lÃ  **matrix build**:

```yaml
strategy:
  matrix:
    node: [18, 20]
    os: [ubuntu-latest, macos-latest]
runs-on: ${{ matrix.os }}
steps:
  - uses: actions/checkout@v4
  - uses: actions/setup-node@v4
    with:
      node-version: ${{ matrix.node }}
  - run: npm ci
  - run: npm test
```

Chá»‰ vá»›i vÃ i dÃ²ng, pipeline tá»± sinh ra bá»‘n job song song â€” Node 18 vÃ  20 trÃªn 
cáº£ Ubuntu láº«n macOS.
Äiá»u thÃº vá»‹ lÃ  GitHub tá»± táº¡o cache layer theo key (`hashFiles('package-lock.json')`). 
Tá»‘c Ä‘á»™ build giáº£m tá»« 30 phÃºt xuá»‘ng cÃ²n khoáº£ng 9 phÃºt.

ChÃºng tÃ´i thÃªm pháº§n cache nhÆ° sau:

```yaml
- name: Cache node_modules
  uses: actions/cache@v4
  with:
    path: ~/.npm
    key: ${{ runner.os }}-npm-${{ hashFiles('package-lock.json') }}
```

Khi log hiá»ƒn thá»‹ dÃ²ng â€œCache restored successfullyâ€, cáº£m giÃ¡c Ä‘Ã³ khÃ¡ â€œphÃªâ€ â€” 
nhÆ° vá»«a láº¥y láº¡i máº¥y phÃºt Ä‘á»i mÃ¬nh.

TÃ´i cÅ©ng báº¯t Ä‘áº§u quan tÃ¢m tá»›i **security**. Khi xem pháº§n `permissions`, 
tÃ´i nháº­n ra máº·c Ä‘á»‹nh GitHub cáº¥p `GITHUB_TOKEN` quyá»n write cho cáº£ repo. 
ÄÃ³ lÃ  rá»§i ro. TÃ´i chá»‰nh láº¡i:

```yaml
permissions:
  contents: read
  packages: write
```

Tá»« Ä‘Ã³, workflow chá»‰ cÃ³ quyá»n Ä‘Ãºng pháº§n nÃ³ cáº§n. Má»™t láº§n khÃ¡c, Ä‘á»“ng nghiá»‡p má»Ÿ PR 
tá»« fork vÃ  pipeline bÃ¡o lá»—i vÃ¬ token bá»‹ giá»›i háº¡n quyá»n. LÃºc Ä‘áº§u hÆ¡i phiá»n, nhÆ°ng 
vá» lÃ¢u dÃ i, Ä‘iá»u Ä‘Ã³ ngÄƒn cháº·n háº³n rá»§i ro â€œbuild leak secretâ€.

Äiá»ƒm tÃ´i thÃ­ch nháº¥t á»Ÿ Actions lÃ  **visibility**. Má»—i láº§n build xong, GitHub tá»± 
Ä‘Ã­nh tráº¡ng thÃ¡i vÃ o PR. KhÃ´ng ai pháº£i há»i â€œbuild qua chÆ°a?â€. Má»i thá»© hiá»ƒn thá»‹ 
ngay bÃªn cáº¡nh commit. VÃ  vÃ¬ toÃ n bá»™ log náº±m trong GitHub, viá»‡c debug trá»Ÿ nÃªn 
dá»… hÆ¡n nhiá»u â€” khÃ´ng cáº§n há»i DevOps team má»Ÿ console.

ChÃºng tÃ´i cÅ©ng thá»­ **self-hosted runner** trÃªn EC2 Ä‘á»ƒ tÄƒng tá»‘c. Má»™t lá»‡nh Ä‘Æ¡n giáº£n:

```bash
./config.sh --url https://github.com/our-org/repo --token $TOKEN
```

Trong dashboard, runner má»›i xuáº¥t hiá»‡n sau vÃ i giÃ¢y. Vá»›i cáº¥u hÃ¬nh cá»©ng hÆ¡n 
(8 cores, SSD local), build giáº£m cÃ²n 4 phÃºt. NhÆ°ng chÃºng tÃ´i pháº£i tá»± lo cleanup, 
update agent, vÃ  security patch â€” Ä‘Ã³ lÃ  trade-off.

Sau khoáº£ng má»™t thÃ¡ng, nhÃ³m tÃ´i chuyá»ƒn toÃ n bá»™ CI sang Actions. Jenkins chÃ­nh thá»©c 
â€œnghá»‰ hÆ°uâ€. CÃ³ vÃ i cÃº váº¥p nháº¹ â€” nhÆ° khi GitHub thay Ä‘á»•i runner image khiáº¿n version 
cá»§a Node khÃ¡c Ä‘i â€” nhÆ°ng overall, Ä‘á»™ tin cáº­y cao hÆ¡n.

### Reflect â€” Sau vÃ i trÄƒm workflow run Ä‘áº§u tiÃªn

NhÃ¬n láº¡i, Ä‘iá»u khiáº¿n GitHub Actions Ä‘Ã¡ng dÃ¹ng khÃ´ng pháº£i vÃ¬ nÃ³ â€œmá»›iâ€ hay â€œngáº§uâ€, 
mÃ  vÃ¬ nÃ³ **giáº£m ma sÃ¡t** giá»¯a dev vÃ  CI/CD. Dev chá»‰ cáº§n push code, pipeline tá»± 
kÃ­ch hoáº¡t, log náº±m cÃ¹ng repo, quyá»n kiá»ƒm soÃ¡t trong tay báº¡n.

Äiá»u chÃºng tÃ´i há»c Ä‘Æ°á»£c:

* **Workflow khÃ´ng pháº£i file YAML, mÃ  lÃ  contract niá»m tin.** Khi báº¡n merge code, báº¡n Ä‘ang Ä‘áº·t niá»m tin vÃ o pipeline kiá»ƒm chá»©ng thay mÃ¬nh.
* **TrÃ¡nh black-box**: hiá»ƒu runner Ä‘ang lÃ m gÃ¬ giÃºp debug nhanh hÆ¡n báº¥t ká»³ plugin nÃ o.
* **Äá»«ng copy-paste workflow cá»§a ngÆ°á»i khÃ¡c.** Má»—i há»‡ thá»‘ng cÃ³ dependency, runtime, permission khÃ¡c nhau. Báº¯t Ä‘áº§u nhá», hiá»ƒu tá»«ng dÃ²ng, rá»“i má»Ÿ rá»™ng.

CÃ²n nhÆ°á»£c Ä‘iá»ƒm? CÃ³. Build queue thá»‰nh thoáº£ng cháº­m khi GitHub quÃ¡ táº£i, 
vÃ  náº¿u báº¡n cáº§n logic quÃ¡ phá»©c táº¡p (nhÆ° dynamic fan-out build), YAML 
báº¯t Ä‘áº§u trá»Ÿ nÃªn cá»“ng ká»nh. NhÆ°ng Ä‘Ã³ lÃ  cÃ¡i giÃ¡ há»£p lÃ½ cho sá»± á»•n Ä‘á»‹nh 
vÃ  native integration.

Cuá»‘i cÃ¹ng, GitHub Actions dáº¡y tÃ´i má»™t Ä‘iá»u khÃ¡ Ä‘Æ¡n giáº£n: **CI/CD khÃ´ng chá»‰ 
lÃ  automation, mÃ  lÃ  rhythm cá»§a team.** Má»™t pipeline cháº¡y Ä‘á»u, minh báº¡ch, 
vÃ  Ä‘Ã¡ng tin cáº­y táº¡o ra nhá»‹p phÃ¡t hÃ nh mÃ  má»i ngÆ°á»i cÃ³ thá»ƒ dá»±a vÃ o. 
VÃ  khi báº¡n Ä‘áº¡t Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³, cÃ´ng cá»¥ chá»‰ cÃ²n lÃ  chi tiáº¿t.